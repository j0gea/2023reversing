## 2주차 : **STAGE 2** - Binary & Analysis

### Background: Binary

---

컴퓨터가 사용하는 언어 : 기계어 (Machine Language) → 0과 1로 이루어짐

사람을 위해 해석된 기계어 : 어셈블리어 (Assembly Language) 

어셈블리어 -(어셈블러 Assembler)> 기계어

사람이 이해하기 더욱 쉬운 언어 : 고급 언어(High-Level Language) → C 등

고급 언어 -(컴파일러 Compuler)> 기계어

---

**프로그램과 컴파일**

—

**프로그램:** 연산 장치가 수행해야 하는 동작을 정의한 문서. 

*저장 장치에 이진 형태로 저장되기 때문에 바이너리(Binary) 라고도 불린다.*

**컴파일(Compile)**: 소스 코드를 기계어의 형식으로 번역하는 것.

- 컴파일러(Compiler)

**인터프리팅(Interpreting)**: 스크립트를 한 줄 한 줄 번역하여 CPU에 전달하는 과정.

- 인터프리터(Interpreter)

**컴파일 과정**

—

C 언어로 작성된 코드의 컴파일 과정

***전처리(Preprocess) → 컴파일(Compile) → 어셈블(Assemble) → 링크(Link)***

1. **전처리(Preprocess):** 소스 코드 컴파일 전, 필요한 형식으로 가공하는 과정.
    1. 주석 제거
    2. 매크로 치환 (#define 등의 상숫값 등)
    3. 파일 병합 
2. **컴파일(Compile):** 소스 코드를 어셈블리어로 번역하는 과정.
    1. 소스 코드의 문법 검사. 문법적 오류가 있다면 에러 출력.
    2. 최적화 기술을 적용해 효율적인 어셈블리 코드를 생성.
3. **어셈블(Assemble):** 컴파일로 생성된 어셈블리어 코드를 ELF/PE 형식의 목적 파일(Object file)로 변환하는 과정.
    - ELF: 리눅스의 실행파일 | PE: 윈도우의 실행 파일
4. **링크(Link):** 목적 파일들을 연결해 실행 가능한 바이너리로 만드는 과정.
    - 다른 라이브러리 등에 존재하는 함수나 코드 등을 링커로 연결한다.

---

**디스어셈블과 디컴파일**

—

**디스어셈블(Disassemble)**: 컴파일된 프로그램의 코드를 어셈블리어로 재번역하는 과정

*기계어 → 어셈블리어*

-다음 명령어 사용 가능

```powershell
$ objdump -d ./add -M intel
```

디컴파일: 고급 언어로 바이너리를 번역하는 **디컴파일러.**

*기계어 → 고급 언어*

- 일대일 대응 관계가 아니라 완전히 같은 코드를 생성해내지 못한다.
- 그러나 분석 효율을 높여준다.

---

### Background: Static Analysis vs. Dynamic Analysis

---

**리버스 엔지니어링: 소프트웨어 분석 방법**

—

- **정적 분석(Static Analysis)**: 외적인 관찰만을 통해 정보를 알아내는 것
- **동적 분석(Dynamic Analysis)**: 실행을 통해 동작을 분석하는 것

**정적 분석**

—

프로그램을 실행시키지 않고 외적인 관찰만으로 분석하는 방법.

**장점**

- **전체 구조를 파악**하기 쉽다. 함수, 호출 관계, API 사용 여부 등을 종합적으로 볼 수 있다. 프로그램을 큰 관점에서 이해할 수 있다.
- **분석 환경**의 제약이 비교적 **자유롭다**. 프로그램을 실행하지 않아도 됨으로 어디서든 분석할 수 있다.
- 바이러스같은 **보안 위협으로부터 안전**하다.

**단점**

- **프로그램에 난독화(Obfuscation)가 적용되면 분석이 어려워진다.** 소프트웨어를 보호하기 위해 사용되는 기법으로, 코드가 심하게 변형되어 흐름을 파악하기 어려워진다.
- **동적 요소를 고려하기 어렵다.** 실행 흐름을 코드만으로 분석하기 어렵다.

**동적 분석**

—

프로그램을 실행시켜 분석하는 방법.

**장점**

- 코드를 분석하지 않아도 **대략적인 동작**을 파악할 수 있다.

**단점**

- **분석 환경을 구축하기 어려울 수 있다.**
- **안티 디버깅(Anti Debugging**) 자신이 디버깅 당하고 있으면 프로그램을 강제로 종료시킴.
